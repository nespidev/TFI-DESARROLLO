<h2>Listado de Encuestas por CategorÃ­a</h2>

<div *ngIf="error" style="color:red;">{{ error }}</div>
<div *ngIf="cargando">Cargando encuestas...</div>

<div *ngIf="!cargando && !error">
  <div *ngFor="let categoria of encuestasPorCategoria | keyvalue">
    <h3>{{ categoria.key }}</h3>
    <ul>
      <li *ngFor="let encuesta of categoria.value" style="margin-bottom: 1rem;">
        <strong>{{ encuesta.nombre }}</strong>

        <span *ngIf="encuesta.codigoRespuesta">
          <!-- Solo encuestas pÃºblicas -->
          <button (click)="responderEncuesta(encuesta)">Responder</button>
        </span>
      </li>
    </ul>
  </div>
</div>

<!-- Acciones globales -->
<div style="margin-top: 2rem;">
  <h3>AnÃ¡lisis Global</h3>
  <button (click)="verEstadisticasGlobales()">ğŸ“Š Ver EstadÃ­sticas Globales</button>
  <button (click)="exportarCSVGlobal()">ğŸ“„ Exportar CSV Global</button>
</div>
